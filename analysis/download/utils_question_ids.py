# oe-eval --model pythia-160m --task arc_easy:rc::olmes --run-local --output-dir olmes_requests --model-type hf

# oe-eval --model pythia-160m --task arc_easy:rc::olmes arc_easy:mc::olmes arc_challenge:rc::olmes arc_challenge:mc::olmes boolq:rc::olmes boolq:mc::olmes coqa::olmes csqa:rc::olmes csqa:mc::olmes drop::olmes hellaswag:rc::olmes hellaswag:mc::olmes jeopardy::olmes naturalqs::olmes openbookqa:rc::olmes openbookqa:mc::olmes piqa:rc::olmes piqa:mc::olmes socialiqa:rc::olmes socialiqa:mc::olmes squad::olmes triviaqa::olmes winogrande:rc::olmes winogrande:mc::olmes mmlu_abstract_algebra:mc::olmes mmlu_anatomy:mc::olmes mmlu_astronomy:mc::olmes mmlu_business_ethics:mc::olmes mmlu_clinical_knowledge:mc::olmes mmlu_college_biology:mc::olmes mmlu_college_chemistry:mc::olmes mmlu_college_computer_science:mc::olmes mmlu_college_mathematics:mc::olmes mmlu_college_medicine:mc::olmes mmlu_college_physics:mc::olmes mmlu_computer_security:mc::olmes mmlu_conceptual_physics:mc::olmes mmlu_econometrics:mc::olmes mmlu_electrical_engineering:mc::olmes mmlu_elementary_mathematics:mc::olmes mmlu_formal_logic:mc::olmes mmlu_global_facts:mc::olmes mmlu_high_school_biology:mc::olmes mmlu_high_school_chemistry:mc::olmes mmlu_high_school_computer_science:mc::olmes mmlu_high_school_european_history:mc::olmes mmlu_high_school_geography:mc::olmes mmlu_high_school_government_and_politics:mc::olmes mmlu_high_school_macroeconomics:mc::olmes mmlu_high_school_mathematics:mc::olmes mmlu_high_school_microeconomics:mc::olmes mmlu_high_school_physics:mc::olmes mmlu_high_school_psychology:mc::olmes mmlu_high_school_statistics:mc::olmes mmlu_high_school_us_history:mc::olmes mmlu_high_school_world_history:mc::olmes mmlu_human_aging:mc::olmes mmlu_human_sexuality:mc::olmes mmlu_international_law:mc::olmes mmlu_jurisprudence:mc::olmes mmlu_logical_fallacies:mc::olmes mmlu_machine_learning:mc::olmes mmlu_management:mc::olmes mmlu_marketing:mc::olmes mmlu_medical_genetics:mc::olmes mmlu_miscellaneous:mc::olmes mmlu_moral_disputes:mc::olmes mmlu_moral_scenarios:mc::olmes mmlu_nutrition:mc::olmes mmlu_philosophy:mc::olmes mmlu_prehistory:mc::olmes mmlu_professional_accounting:mc::olmes mmlu_professional_law:mc::olmes mmlu_professional_medicine:mc::olmes mmlu_professional_psychology:mc::olmes mmlu_public_relations:mc::olmes mmlu_security_studies:mc::olmes mmlu_sociology:mc::olmes mmlu_us_foreign_policy:mc::olmes mmlu_virology:mc::olmes mmlu_world_religions:mc::olmes mmlu_abstract_algebra:rc::olmes mmlu_anatomy:rc::olmes mmlu_astronomy:rc::olmes mmlu_business_ethics:rc::olmes mmlu_clinical_knowledge:rc::olmes mmlu_college_biology:rc::olmes mmlu_college_chemistry:rc::olmes mmlu_college_computer_science:rc::olmes mmlu_college_mathematics:rc::olmes mmlu_college_medicine:rc::olmes mmlu_college_physics:rc::olmes mmlu_computer_security:rc::olmes mmlu_conceptual_physics:rc::olmes mmlu_econometrics:rc::olmes mmlu_electrical_engineering:rc::olmes mmlu_elementary_mathematics:rc::olmes mmlu_formal_logic:rc::olmes mmlu_global_facts:rc::olmes mmlu_high_school_biology:rc::olmes mmlu_high_school_chemistry:rc::olmes mmlu_high_school_computer_science:rc::olmes mmlu_high_school_european_history:rc::olmes mmlu_high_school_geography:rc::olmes mmlu_high_school_government_and_politics:rc::olmes mmlu_high_school_macroeconomics:rc::olmes mmlu_high_school_mathematics:rc::olmes mmlu_high_school_microeconomics:rc::olmes mmlu_high_school_physics:rc::olmes mmlu_high_school_psychology:rc::olmes mmlu_high_school_statistics:rc::olmes mmlu_high_school_us_history:rc::olmes mmlu_high_school_world_history:rc::olmes mmlu_human_aging:rc::olmes mmlu_human_sexuality:rc::olmes mmlu_international_law:rc::olmes mmlu_jurisprudence:rc::olmes mmlu_logical_fallacies:rc::olmes mmlu_machine_learning:rc::olmes mmlu_management:rc::olmes mmlu_marketing:rc::olmes mmlu_medical_genetics:rc::olmes mmlu_miscellaneous:rc::olmes mmlu_moral_disputes:rc::olmes mmlu_moral_scenarios:rc::olmes mmlu_nutrition:rc::olmes mmlu_philosophy:rc::olmes mmlu_prehistory:rc::olmes mmlu_professional_accounting:rc::olmes mmlu_professional_law:rc::olmes mmlu_professional_medicine:rc::olmes mmlu_professional_psychology:rc::olmes mmlu_public_relations:rc::olmes mmlu_security_studies:rc::olmes mmlu_sociology:rc::olmes mmlu_us_foreign_policy:rc::olmes mmlu_virology:rc::olmes mmlu_world_religions:rc::olmes --run-local --output-dir olmes_requests --model-type hf

# from oe_eval.run_eval import run_eval
# from oe_eval.configs.tasks import TASK_CONFIGS
import os

os.chdir(os.path.dirname(os.path.abspath(__file__)))

def main():
    """
    Run OLMES and place just the partial request files somewhere in the data/ folder, so we can extract instance IDs
    """
    # selected_tasks = []
    # for task_name, task_cls in TASK_CONFIGS.items():
    #     if task_name.endswith(':olmes'):
    #         selected_tasks += [task_name]

    selected_tasks = [
        "arc_easy:rc::olmes",
        "arc_easy:mc::olmes",
        "arc_challenge:rc::olmes",
        "arc_challenge:mc::olmes",
        "boolq:rc::olmes",
        "boolq:mc::olmes",
        "coqa::olmes",
        "csqa:rc::olmes",
        "csqa:mc::olmes",
        "drop::olmes",
        "hellaswag:rc::olmes",
        "hellaswag:mc::olmes",
        "jeopardy::olmes",
        "naturalqs::olmes",
        "openbookqa:rc::olmes",
        "openbookqa:mc::olmes",
        "piqa:rc::olmes",
        "piqa:mc::olmes",
        "socialiqa:rc::olmes",
        "socialiqa:mc::olmes",
        "squad::olmes",
        "triviaqa::olmes",
        "winogrande:rc::olmes",
        "winogrande:mc::olmes",
        "mmlu_abstract_algebra:mc::olmes",
        "mmlu_anatomy:mc::olmes",
        "mmlu_astronomy:mc::olmes",
        "mmlu_business_ethics:mc::olmes",
        "mmlu_clinical_knowledge:mc::olmes",
        "mmlu_college_biology:mc::olmes",
        "mmlu_college_chemistry:mc::olmes",
        "mmlu_college_computer_science:mc::olmes",
        "mmlu_college_mathematics:mc::olmes",
        "mmlu_college_medicine:mc::olmes",
        "mmlu_college_physics:mc::olmes",
        "mmlu_computer_security:mc::olmes",
        "mmlu_conceptual_physics:mc::olmes",
        "mmlu_econometrics:mc::olmes",
        "mmlu_electrical_engineering:mc::olmes",
        "mmlu_elementary_mathematics:mc::olmes",
        "mmlu_formal_logic:mc::olmes",
        "mmlu_global_facts:mc::olmes",
        "mmlu_high_school_biology:mc::olmes",
        "mmlu_high_school_chemistry:mc::olmes",
        "mmlu_high_school_computer_science:mc::olmes",
        "mmlu_high_school_european_history:mc::olmes",
        "mmlu_high_school_geography:mc::olmes",
        "mmlu_high_school_government_and_politics:mc::olmes",
        "mmlu_high_school_macroeconomics:mc::olmes",
        "mmlu_high_school_mathematics:mc::olmes",
        "mmlu_high_school_microeconomics:mc::olmes",
        "mmlu_high_school_physics:mc::olmes",
        "mmlu_high_school_psychology:mc::olmes",
        "mmlu_high_school_statistics:mc::olmes",
        "mmlu_high_school_us_history:mc::olmes",
        "mmlu_high_school_world_history:mc::olmes",
        "mmlu_human_aging:mc::olmes",
        "mmlu_human_sexuality:mc::olmes",
        "mmlu_international_law:mc::olmes",
        "mmlu_jurisprudence:mc::olmes",
        "mmlu_logical_fallacies:mc::olmes",
        "mmlu_machine_learning:mc::olmes",
        "mmlu_management:mc::olmes",
        "mmlu_marketing:mc::olmes",
        "mmlu_medical_genetics:mc::olmes",
        "mmlu_miscellaneous:mc::olmes",
        "mmlu_moral_disputes:mc::olmes",
        "mmlu_moral_scenarios:mc::olmes",
        "mmlu_nutrition:mc::olmes",
        "mmlu_philosophy:mc::olmes",
        "mmlu_prehistory:mc::olmes",
        "mmlu_professional_accounting:mc::olmes",
        "mmlu_professional_law:mc::olmes",
        "mmlu_professional_medicine:mc::olmes",
        "mmlu_professional_psychology:mc::olmes",
        "mmlu_public_relations:mc::olmes",
        "mmlu_security_studies:mc::olmes",
        "mmlu_sociology:mc::olmes",
        "mmlu_us_foreign_policy:mc::olmes",
        "mmlu_virology:mc::olmes",
        "mmlu_world_religions:mc::olmes",
        "mmlu_abstract_algebra:rc::olmes",
        "mmlu_anatomy:rc::olmes",
        "mmlu_astronomy:rc::olmes",
        "mmlu_business_ethics:rc::olmes",
        "mmlu_clinical_knowledge:rc::olmes",
        "mmlu_college_biology:rc::olmes",
        "mmlu_college_chemistry:rc::olmes",
        "mmlu_college_computer_science:rc::olmes",
        "mmlu_college_mathematics:rc::olmes",
        "mmlu_college_medicine:rc::olmes",
        "mmlu_college_physics:rc::olmes",
        "mmlu_computer_security:rc::olmes",
        "mmlu_conceptual_physics:rc::olmes",
        "mmlu_econometrics:rc::olmes",
        "mmlu_electrical_engineering:rc::olmes",
        "mmlu_elementary_mathematics:rc::olmes",
        "mmlu_formal_logic:rc::olmes",
        "mmlu_global_facts:rc::olmes",
        "mmlu_high_school_biology:rc::olmes",
        "mmlu_high_school_chemistry:rc::olmes",
        "mmlu_high_school_computer_science:rc::olmes",
        "mmlu_high_school_european_history:rc::olmes",
        "mmlu_high_school_geography:rc::olmes",
        "mmlu_high_school_government_and_politics:rc::olmes",
        "mmlu_high_school_macroeconomics:rc::olmes",
        "mmlu_high_school_mathematics:rc::olmes",
        "mmlu_high_school_microeconomics:rc::olmes",
        "mmlu_high_school_physics:rc::olmes",
        "mmlu_high_school_psychology:rc::olmes",
        "mmlu_high_school_statistics:rc::olmes",
        "mmlu_high_school_us_history:rc::olmes",
        "mmlu_high_school_world_history:rc::olmes",
        "mmlu_human_aging:rc::olmes",
        "mmlu_human_sexuality:rc::olmes",
        "mmlu_international_law:rc::olmes",
        "mmlu_jurisprudence:rc::olmes",
        "mmlu_logical_fallacies:rc::olmes",
        "mmlu_machine_learning:rc::olmes",
        "mmlu_management:rc::olmes",
        "mmlu_marketing:rc::olmes",
        "mmlu_medical_genetics:rc::olmes",
        "mmlu_miscellaneous:rc::olmes",
        "mmlu_moral_disputes:rc::olmes",
        "mmlu_moral_scenarios:rc::olmes",
        "mmlu_nutrition:rc::olmes",
        "mmlu_philosophy:rc::olmes",
        "mmlu_prehistory:rc::olmes",
        "mmlu_professional_accounting:rc::olmes",
        "mmlu_professional_law:rc::olmes",
        "mmlu_professional_medicine:rc::olmes",
        "mmlu_professional_psychology:rc::olmes",
        "mmlu_public_relations:rc::olmes",
        "mmlu_security_studies:rc::olmes",
        "mmlu_sociology:rc::olmes",
        "mmlu_us_foreign_policy:rc::olmes",
        "mmlu_virology:rc::olmes",
        "mmlu_world_religions:rc::olmes"
    ]

    for task_name in selected_tasks:
        os.system(f'oe-eval --model pythia-160m --task {task_name} --run-local --output-dir olmes_requests --model-type hf')


if __name__ == "__main__":
    main()
